<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" href="ministries.css">

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="http://dev.stpatrickcolumbus.org/templates/joomspirit_99/organizationInfo.js"></script>

<div class="container-fluid">
    <div class="row">
        <h2 style="text-align: center;">Come to the Supper of the Lamb</h2>
        <div id="pray-wrapper" class="category-wrapper well col-md-4 col-md-offset-1 col-xs-12">
            <h2>Pray</h2>
            <div id="pray" style="display: none;">Pray</div>
        </div>
        <div id="learn-wrapper" class="category-wrapper well col-md-4 col-md-offset-2 col-xs-12">
            <h2>Learn</h2>
            <div id="learn" style="display: none;">Learn</div>
        </div>
    </div>
    <div class="row">
        <h2 style="text-align: center;">Bring Christ to a Hungry World</h2>
        <div id="serve-wrapper" class="category-wrapper well col-md-4 col-md-offset-1 col-xs-12">
            <h2>Serve</h2>
            <div id="serve" style="display: none;">Serve</div>
        </div>
        <div id="connect-wrapper" class="category-wrapper well col-md-4 col-md-offset-2 col-xs-12">
            <h2>Connect</h2>
            <div id="connect" style="display: none;">Connect</div>
        </div>
    </div>
</div>

<script>
    $(document).ready(function($) {

        function showMinistries(element) {
            $(element).children("h2").hide();
            var category = $(element).children("div")[0].id;
            $category = $("#" + category);
            $category.html("");
            categories[category].forEach(function(ministryLink) {
                $category.append(ministryLink);
            });
            $category.show();
        }

        function hideMinistries(element) {
            $(element).children("h2").show();
            $(element).children("div").hide();
        }

        ministries = JSON.parse(data);
        $("#ministries").html("");
        $("#connect").html("");
        categories = {
            "pray": [],
            "learn": [],
            "serve": [],
            "connect": []
        }
        ministries.forEach(function(ministry) {
            categories[ministry["header"]].push('<div class="ministryLink"><a href="http://dev.stpatrickcolumbus.org/index.php?option=com_content&view=article&id=446&group=' + ministry["urlVar"] + '">' + ministry["ministryName"] + '</a></div>');
        });

        $(".category-wrapper").hover(function() {
            showMinistries(this)
        }, function() {
            hideMinistries(this)
        });
        $(".category-wrapper").click(function() {
            var $wrapper = $(this).closest(".category-wrapper")
            if($wrapper.children('div').css("display") == "none") {
                showMinistries($wrapper);
            } else {
                hideMinistries($wrapper);
            }
        });
    });
</script>
